---
import BaseLayout from '../../layouts/BaseLayout.astro';
import Hero from '../../components/Hero.astro';
import { getProducts } from '../../lib/wp';
import { fallbackPaintings } from '../../lib/fallbackPaintings';
import { getBooleanEnv } from '../../lib/env';

export const prerender = false;

const showEventsNews = getBooleanEnv(['PUBLIC_SHOW_EVENTS_NEWS', 'SHOW_EVENTS_NEWS'], true);
const showPurchaseButtons = getBooleanEnv(
  ['PUBLIC_SHOW_PURCHASE_BUTTONS', 'SHOW_PURCHASE_BUTTONS'],
  false
);
const paintingsFromWp = (await getProducts(60)).filter(painting => painting.image);
const paintings =
  paintingsFromWp.length > 0
    ? paintingsFromWp
    : fallbackPaintings.map(item => ({ ...item, link: '#!' }));
const orderedPaintings = [...paintings].reverse();
const featuredPainting = paintings.find(painting => painting.image);
const whatsOnPaintings = orderedPaintings.filter(painting => painting.image).slice(0, 2);
const exhibitionsHref = '/en/exhibitions';
---

<BaseLayout
  lang="en"
  title="My Light Gallery Art – Art Gallery"
  description="Art gallery focused on high-quality contemporary and classic works"
  showEventsNews={showEventsNews}
>
  <Hero lang="en" showEventsNews={showEventsNews} />

  <div class="pattern-surface">
    <section id="collections" class="section section-colecciones rg-collections">
      <div class="container rg-collections__inner">
        <div class="rg-collections__media">
          {featuredPainting?.image ? (
            <img
              src={featuredPainting.image}
              alt={featuredPainting.title ?? 'Collections'}
              loading="lazy"
              decoding="async"
            />
          ) : (
            <div class="rg-collections__placeholder">Collections</div>
          )}
        </div>
        <div class="rg-collections__content">
          <span class="rg-eyebrow">Collection</span>
          <h2>Collections</h2>
          <p class="section-intro">
            Painting is my essential need and my most authentic way to express myself. Through color and creative freedom, I communicate emotions and feelings that words can’t fully convey. Painting is my natural language, an intimate space where my sensitivity flows.
          </p>
          <a class="rg-link" href={exhibitionsHref}>View all works</a>
        </div>
      </div>
    </section>

    {showEventsNews && (
    <section id="events" class="section rg-whats-on">
      <div class="container">
        <article class="rg-heading">
          <h2>What's on</h2>
          <div class="rg-more-link">
            <a href={exhibitionsHref}>See more</a>
            <span aria-hidden="true">→</span>
          </div>
        </article>

        <div class="rg-exhibitions">
          {whatsOnPaintings.map((painting, index) => {
            const paintingHref =
              painting.link && painting.link !== '#!' ? painting.link : exhibitionsHref;
            const meta = [painting.dimensions, painting.priceText].filter(Boolean).join(' • ');
            return (
              <article class="rg-exhibition" style={`--delay: ${index * 0.12}s`}>
                <header>{index === 0 ? 'On now' : 'Upcoming'}</header>
                <div class="rg-exhibition__image">
                  <a href={paintingHref}>
                    <img
                      src={painting.image}
                      alt={painting.title}
                      loading="lazy"
                      decoding="async"
                    />
                  </a>
                </div>
                <div class="rg-exhibition__content">
                  <h3>{painting.title}</h3>
                  {meta && <div class="rg-exhibition__meta">{meta}</div>}
                  <a class="rg-exhibition__button" href={paintingHref}>More info</a>
                </div>
              </article>
            );
          })}
          {whatsOnPaintings.length === 0 && (
            <p class="rg-empty">New works coming soon.</p>
          )}
        </div>
      </div>
    </section>
    )}

    {showEventsNews && (
    <section id="news" class="section section-noticias">
      <div class="container">
        <h2>News</h2>
        <div class="news-grid">
          <article class="news-card">
            <div class="news-image" style="background: #cfc5ba;"></div>
            <div class="news-content">
              <h3>New Acquisition: 19th Century Work</h3>
              <p>We are pleased to announce the acquisition of an exceptional 19th-century piece...</p>
              <a href="/en/#news" class="news-link">Read more</a>
            </div>
          </article>
          <article class="news-card">
            <div class="news-image" style="background: #bfb5aa;"></div>
            <div class="news-content">
              <h3>Featured Artist: Solo Exhibition</h3>
              <p>Discover the latest exhibition from one of the most promising contemporary artists...</p>
              <a href="/en/#news" class="news-link">Read more</a>
            </div>
          </article>
        </div>
        <div class="section-footer">
          <a href="/en/#news" class="btn-secondary">Latest News</a>
        </div>
      </div>
    </section>
    )}

    <section id="layla" class="section section-about">
      <div class="container">
        <h2>Layla</h2>
        <div class="about-content">
          <div class="about-text">
            <p>
              Layla González Camarena Soutou is a multidisciplinary visual artist whose work springs from a deep affinity with color, light, and free creative expression. With academic training in Graphic Design, Art History, and Advertising & Marketing, she combines theoretical knowledge with intuitive sensitivity to develop an authentic artistic language.
            </p>
            <p>
              Her practice focuses mainly on abstract art. She is especially drawn to vivid, luminous colors and dynamic compositions that convey life, joy, and emotion. She works with acrylic, oil, mixed media, drawing, inks, pastels, and hot/cold wax, allowing each piece to evolve organically without rigid rules.
            </p>
            <p>
              For Layla, painting is essential: it is her deepest and most beautiful way of expressing herself. Through painting, she communicates emotions, energy, and inner states beyond words. The canvas becomes a space of freedom, exploration, and truth, where color and movement speak directly to the viewer.
            </p>
            <p>
              Her artistic journey is enriched by continuous training in painting, drawing, human figure, creative expression, and mixed techniques, developed in Mexico and the United States. This diversity of experiences is reflected in expressive, vibrant work deeply connected to human experience.
            </p>
          </div>
          <div class="about-image"></div>
        </div>
      </div>
    </section>
  </div>
</BaseLayout>

<style>
  .section {
    padding: 5rem 2rem;
  }

  .container {
    max-width: 1200px;
    margin: 0 auto;
  }

  h2 {
    font-size: 2.5rem;
    font-weight: 300;
    letter-spacing: 0.05em;
    margin-bottom: 3rem;
    text-align: center;
    text-transform: uppercase;
  }

  .pattern-surface {
    position: relative;
    --motif-url: url('/motifs/paint-blotches.svg');
    background-color: #fbf8f4;
    background-image:
      radial-gradient(circle at 15% 15%, rgba(255, 255, 255, 0.9), transparent 60%),
      radial-gradient(circle at 85% 10%, rgba(255, 255, 255, 0.6), transparent 55%),
      var(--motif-url),
      linear-gradient(150deg, rgba(255, 255, 255, 0.96), rgba(241, 234, 226, 0.92));
    background-size: 180% 180%, 180% 180%, 150% auto, 100% 100%;
    background-position: 10% 0%, 90% 0%, center 30%, center;
    background-repeat: no-repeat;
    background-attachment: scroll, scroll, fixed, scroll;
  }

  .section-intro {
    font-size: 1.1rem;
    line-height: 1.8;
    color: #4b433a;
    text-align: center;
    max-width: 960px;
    margin: 0 auto 3rem;
    padding: 2.4rem 3.25rem;
    border-radius: 14px;
    border: 1px solid rgba(214, 204, 192, 0.5);
    background: rgba(255, 255, 255, 0.78);
    box-shadow: 0 18px 45px rgba(22, 16, 10, 0.12);
    backdrop-filter: blur(6px);
  }

  .section-footer {
    text-align: center;
    margin-top: 3rem;
  }

  .btn-secondary {
    display: inline-block;
    padding: 1rem 2.5rem;
    border: 2px solid #000;
    color: #000;
    text-decoration: none;
    transition: all 0.3s;
    font-size: 0.95rem;
    letter-spacing: 0.05em;
  }

  .btn-secondary:hover {
    background: #000;
    color: white;
  }

  .section-colecciones {
    background: transparent;
  }

  .rg-collections {
    --rg-ink: #1d1a16;
    --rg-muted: #6f675f;
    --rg-line: #d7cfc2;
    --rg-paper: #fbf8f2;
    background:
      radial-gradient(circle at 12% 15%, rgba(255, 255, 255, 0.85), transparent 55%),
      linear-gradient(135deg, rgba(255, 255, 255, 0.92), rgba(238, 230, 218, 0.95));
    color: var(--rg-ink);
    font-family: 'Roboto', sans-serif;
    position: relative;
    overflow: hidden;
  }

  .rg-collections::before {
    content: '';
    position: absolute;
    inset: 0;
    background-image: var(--motif-url, url('/motifs/paint-blotches.svg'));
    background-size: 1200px auto;
    background-repeat: repeat;
    opacity: 0.22;
    mix-blend-mode: multiply;
    pointer-events: none;
    z-index: 0;
  }

  .rg-collections > .container {
    position: relative;
    z-index: 1;
  }

  .rg-collections__inner {
    display: grid;
    grid-template-columns: minmax(0, 1.1fr) minmax(0, 0.9fr);
    gap: 3.5rem;
    align-items: center;
  }

  .rg-collections__media {
    position: relative;
    padding: 1.5rem;
    background: rgba(255, 255, 255, 0.75);
    border: 1px solid var(--rg-line);
    box-shadow: 0 25px 60px rgba(35, 24, 16, 0.18);
    animation: rg-rise 0.9s ease both;
  }

  .rg-collections__media img {
    width: 100%;
    height: 520px;
    object-fit: cover;
    display: block;
    border: 1px solid rgba(40, 32, 24, 0.15);
  }

  .rg-collections__placeholder {
    display: flex;
    align-items: center;
    justify-content: center;
    height: 520px;
    background: rgba(255, 255, 255, 0.5);
    border: 1px dashed var(--rg-line);
    font-family: 'Cormorant Garamond', serif;
    font-size: 2rem;
    text-transform: uppercase;
    letter-spacing: 0.2em;
    color: var(--rg-muted);
  }

  .rg-collections__content {
    animation: rg-rise 0.9s ease both;
    animation-delay: 0.12s;
  }

  .rg-collections h2 {
    font-family: 'Cormorant Garamond', serif;
    font-size: clamp(2.4rem, 4vw, 3.2rem);
    letter-spacing: 0.08em;
    text-align: left;
    margin-bottom: 1.5rem;
  }

  .rg-eyebrow {
    display: inline-flex;
    align-items: center;
    gap: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.32em;
    font-size: 0.72rem;
    color: var(--rg-muted);
  }

  .rg-eyebrow::after {
    content: '';
    width: 36px;
    height: 1px;
    background: var(--rg-line);
  }

  .rg-collections .section-intro {
    margin: 0 0 2rem;
    padding: 0;
    text-align: left;
    max-width: none;
    background: transparent;
    border: none;
    box-shadow: none;
    backdrop-filter: none;
    color: var(--rg-muted);
    font-size: 1.05rem;
  }

  .rg-link {
    display: inline-flex;
    align-items: center;
    gap: 0.75rem;
    text-decoration: none;
    color: var(--rg-ink);
    text-transform: uppercase;
    letter-spacing: 0.18em;
    font-size: 0.78rem;
    border-bottom: 1px solid var(--rg-ink);
    padding-bottom: 0.35rem;
    transition: opacity 0.3s;
  }

  .rg-link:hover {
    opacity: 0.7;
  }

  .rg-whats-on {
    --rg-ink: #1d1a16;
    --rg-muted: #6f675f;
    --rg-line: #d7cfc2;
    background:
      radial-gradient(circle at 85% 5%, rgba(255, 255, 255, 0.7), transparent 55%),
      linear-gradient(180deg, rgba(240, 232, 220, 0.92), rgba(229, 221, 208, 0.98));
    color: var(--rg-ink);
    font-family: 'Roboto', sans-serif;
    position: relative;
    overflow: hidden;
  }

  .rg-whats-on::before {
    content: '';
    position: absolute;
    inset: 0;
    background-image: var(--motif-url, url('/motifs/paint-blotches.svg'));
    background-size: 1200px auto;
    background-repeat: repeat;
    opacity: 0.22;
    mix-blend-mode: multiply;
    pointer-events: none;
    z-index: 0;
  }

  .rg-whats-on > .container {
    position: relative;
    z-index: 1;
  }

  .rg-heading {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 2rem;
    padding-bottom: 1.5rem;
    border-bottom: 1px solid var(--rg-line);
    margin-bottom: 3rem;
  }

  .rg-heading h2 {
    margin: 0;
    font-family: 'Cormorant Garamond', serif;
    font-size: clamp(2.2rem, 4vw, 3rem);
    letter-spacing: 0.08em;
    text-align: left;
  }

  .rg-more-link {
    display: inline-flex;
    align-items: center;
    gap: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.2em;
    font-size: 0.75rem;
  }

  .rg-more-link a {
    text-decoration: none;
    color: var(--rg-ink);
  }

  .rg-exhibitions {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
    gap: 2.5rem;
  }

  .rg-exhibition {
    background: rgba(255, 255, 255, 0.86);
    border: 1px solid var(--rg-line);
    padding: 1.5rem;
    box-shadow: 0 18px 40px rgba(40, 30, 20, 0.15);
    display: flex;
    flex-direction: column;
    gap: 1.25rem;
    animation: rg-rise 0.8s ease both;
    animation-delay: var(--delay, 0s);
  }

  .rg-exhibition header {
    font-size: 0.7rem;
    letter-spacing: 0.32em;
    text-transform: uppercase;
    color: var(--rg-muted);
  }

  .rg-exhibition__image img {
    width: 100%;
    height: 320px;
    object-fit: cover;
    border: 1px solid rgba(35, 28, 20, 0.12);
    display: block;
  }

  .rg-exhibition__content h3 {
    margin: 0 0 0.5rem;
    font-family: 'Cormorant Garamond', serif;
    font-size: 1.8rem;
    font-weight: 500;
  }

  .rg-exhibition__meta {
    color: var(--rg-muted);
    font-size: 0.95rem;
  }

  .rg-exhibition__button {
    align-self: flex-start;
    text-decoration: none;
    color: var(--rg-ink);
    border: 1px solid var(--rg-ink);
    padding: 0.65rem 1.4rem;
    font-size: 0.8rem;
    letter-spacing: 0.18em;
    text-transform: uppercase;
    transition: all 0.3s ease;
  }

  .rg-exhibition__button:hover {
    background: var(--rg-ink);
    color: #fff;
  }

  .rg-empty {
    grid-column: 1 / -1;
    text-align: center;
    color: var(--rg-muted);
  }

  @keyframes rg-rise {
    from {
      opacity: 0;
      transform: translateY(18px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @media (prefers-reduced-motion: reduce) {
    .rg-collections__media,
    .rg-collections__content,
    .rg-exhibition {
      animation: none;
    }
  }

  @media (max-width: 1024px) {
    .rg-collections__inner {
      grid-template-columns: 1fr;
    }

    .rg-collections__media img,
    .rg-collections__placeholder {
      height: 420px;
    }
  }

  @media (max-width: 768px) {
    .rg-heading {
      flex-direction: column;
      align-items: flex-start;
    }

    .rg-exhibition__image img {
      height: 260px;
    }
  }

  .paintings-carousel {
    max-width: 1200px;
    margin: 0 auto;
    padding: 2rem 0;
  }

  .carousel-container {
    flex: 1;
    overflow: visible;
  }

  .carousel-track {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
    gap: 2rem;
    align-items: start;
  }

  .painting-card-wrapper {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
    height: 100%;
  }

  .painting-card {
    text-decoration: none;
    color: inherit;
    transition: transform 0.3s, box-shadow 0.3s;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.6rem;
    padding: 1rem;
    border: 1px solid #eee;
    background: #faf8f5;
    height: 100%;
    cursor: zoom-in;
    width: 100%;
    flex: 1;
  }

  .painting-card:hover {
    transform: translateY(-6px);
    box-shadow: 0 16px 30px rgba(0, 0, 0, 0.08);
  }

  .painting-card img {
    width: 100%;
    height: 280px;
    object-fit: cover;
    display: block;
    border: 1px solid #e2e2e2;
    background: #f3f1ee;
  }

  .painting-card h3 {
    font-size: 1.1rem;
    font-weight: 700;
    text-align: center;
    color: #333;
    letter-spacing: 0.02em;
  }

  .painting-meta {
    margin-top: 0.15rem;
    font-size: 0.9rem;
    color: #555;
    text-align: center;
  }

  .painting-price {
    font-weight: 600;
    color: #1d1d1d;
  }

  .painting-purchase-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.35rem;
    padding: 0.65rem 1.25rem;
    background: #111;
    color: #fff;
    border: 1px solid #111;
    text-decoration: none;
    font-size: 0.95rem;
    letter-spacing: 0.03em;
    transition: all 0.25s ease;
    width: fit-content;
  }

  .painting-purchase-btn:hover {
    background: transparent;
    color: #111;
  }

  .painting-purchase-btn.is-disabled {
    opacity: 0.45;
    cursor: not-allowed;
    pointer-events: none;
  }

  .paintings-empty {
    grid-column: 1 / -1;
    text-align: center;
    color: #666;
    margin: 1rem 0;
  }

  /* Lightbox */
  .lightbox {
    position: fixed;
    inset: 0;
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 2000;
  }

  .lightbox.is-open {
    display: flex;
  }

  .lightbox-backdrop {
    position: absolute;
    inset: 0;
    background: rgba(0, 0, 0, 0.7);
    backdrop-filter: blur(4px);
  }

  .lightbox-content {
    position: relative;
    max-width: min(90vw, 1200px);
    max-height: 90vh;
    width: min(90vw, 900px);
    padding: 1.5rem;
    background: #fff;
    box-shadow: 0 20px 80px rgba(0, 0, 0, 0.4);
    display: flex;
    flex-direction: column;
    gap: 1rem;
    z-index: 1;
  }

  .lightbox-content img {
    max-height: 70vh;
    object-fit: contain;
    width: 100%;
  }

  .lightbox-caption {
    text-align: center;
    font-size: 1rem;
    color: #333;
  }

  .lightbox-close {
    position: absolute;
    top: 0.5rem;
    right: 0.5rem;
    background: #000;
    color: #fff;
    border: none;
    width: 36px;
    height: 36px;
    border-radius: 50%;
    cursor: pointer;
    font-size: 1.2rem;
    line-height: 1;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  /* Events */
  .section-eventos {
    background: rgba(26, 26, 26, 0.92);
    color: #fff;
    backdrop-filter: blur(6px);
  }

  .section-eventos h2 {
    color: #fff;
    text-align: left;
  }

  .section-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 3rem;
  }

  .see-more-link {
    color: #fff;
    text-decoration: none;
    font-size: 1rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    transition: opacity 0.3s;
  }

  .see-more-link:hover {
    opacity: 0.7;
  }

  .events-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(450px, 1fr));
    gap: 0;
  }

  .event-card {
    background: transparent;
    padding: 0;
    position: relative;
    display: flex;
    flex-direction: column;
  }

  .event-badge {
    position: absolute;
    top: 2rem;
    left: 0;
    background: #000;
    color: white;
    padding: 0.5rem 1rem;
    font-size: 0.75rem;
    letter-spacing: 0.15em;
    z-index: 1;
    font-weight: 600;
  }

  .event-image {
    width: 100%;
    height: 400px;
    margin-bottom: 2rem;
  }

  .event-content {
    padding: 0 2rem 3rem 0;
  }

  .event-card h3 {
    font-size: 1.8rem;
    font-weight: 400;
    margin-bottom: 1rem;
    color: #fff;
    text-align: left;
  }

  .event-card p {
    color: #ccc;
    margin-bottom: 0.5rem;
    text-align: left;
    font-size: 1rem;
  }

  .event-location {
    font-weight: 600;
    margin-top: 1rem;
  }

  .event-link {
    color: #fff;
    text-decoration: none;
    border: 2px solid #fff;
    transition: all 0.3s;
    font-size: 0.95rem;
    display: inline-block;
    padding: 0.75rem 1.5rem;
    margin-top: 1rem;
  }

  .event-link:hover {
    background: #fff;
    color: #000;
  }

  /* News */
  .section-noticias {
    background: transparent;
  }

  .news-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
    gap: 3rem;
  }

  .news-card {
    display: flex;
    flex-direction: column;
  }

  .news-image {
    width: 100%;
    height: 250px;
    margin-bottom: 1.5rem;
  }

  .news-content h3 {
    font-size: 1.3rem;
    font-weight: 400;
    margin-bottom: 1rem;
  }

  .news-content p {
    color: #666;
    margin-bottom: 1rem;
    text-align: left;
    font-size: 1rem;
    line-height: 1.6;
  }

  .news-link {
    color: #000;
    text-decoration: none;
    border-bottom: 1px solid #000;
    transition: opacity 0.3s;
    align-self: flex-start;
    font-size: 0.95rem;
  }

  .news-link:hover {
    opacity: 0.7;
  }

  /* About */
  .section-about {
    background: rgba(249, 247, 245, 0.72);
    backdrop-filter: blur(4px);
  }

  .section-about .container {
    max-width: 1400px;
    padding: 0 1rem;
  }

  .about-content {
    display: grid;
    grid-template-columns: 1.3fr 1fr;
    gap: 3rem;
    align-items: center;
  }

  .about-text p {
    font-size: 1.1rem;
    line-height: 1.8;
    color: #555;
    margin-bottom: 1.5rem;
    text-align: left;
  }

  .about-image {
    width: calc(100% + 3cm);
    height: calc(400px + 3cm);
    margin-right: -3cm;
    background:
      url('/layla.webp') center/contain no-repeat,
      url('/layla.jpeg') center/contain no-repeat;
  }

  @media (max-width: 1024px) {
    .paintings-carousel {
      padding: 2rem 1rem;
    }

    .section {
      padding: 3rem 1rem;
    }
  }

  @media (max-width: 768px) {
    .categories-grid,
    .events-grid,
    .news-grid {
      grid-template-columns: 1fr;
    }

    .about-content {
      grid-template-columns: 1fr;
      gap: 2rem;
    }

    .about-image {
      height: 300px;
      width: 100%;
      margin-right: 0;
    }

    h2 {
      font-size: 2rem;
    }

    .section-intro {
      font-size: 1rem;
      padding: 1.8rem 1.5rem;
      margin-bottom: 2.5rem;
    }

    .pattern-surface {
      background-attachment: scroll, scroll, scroll, scroll;
    }

    .painting-card img {
      height: 280px;
    }

    .events-grid {
      gap: 2rem;
    }

    .event-card {
      padding: 0;
    }

    .event-content {
      padding: 0 1rem 2rem 0;
    }

    .news-grid {
      gap: 2rem;
    }
  }

  @media (max-width: 480px) {
    .section {
      padding: 2rem 0.5rem;
    }

    .container {
      padding: 0 1rem;
    }

    h2 {
      font-size: 1.75rem;
    }

    .painting-card img {
      height: 250px;
    }

    .event-image {
      height: 300px;
    }

    .event-card h3 {
      font-size: 1.4rem;
    }

    .news-image {
      height: 200px;
    }
  }
</style>
